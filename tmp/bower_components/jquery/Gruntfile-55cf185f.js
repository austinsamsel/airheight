module.exports=function(e){"use strict";var s=["dist/jquery.js","dist/jquery.min.map","dist/jquery.min.js"],r=require("gzip-js"),t=function(s){var r={};try{r=e.file.readJSON(s)}catch(t){}return r},i=t("src/.jshintrc");delete i.onevar,e.initConfig({pkg:e.file.readJSON("package.json"),dst:t("dist/.destination.json"),compare_size:{files:["dist/jquery.js","dist/jquery.min.js"],options:{compress:{gz:function(e){return r.zip(e,{}).length}},cache:"dist/.sizecache.json"}},selector:{destFile:"src/selector-sizzle.js",apiFile:"src/sizzle-jquery-ce4a9d30.js",srcFile:"src/sizzle/dist/sizzle.js"},build:{all:{dest:"dist/jquery.js",src:["src/intro-d1d023d5.js","src/core-e01a2a1d.js","src/selector-sizzle.js","src/callbacks-0a488c35.js","src/deferred-e0e61665.js","src/support-98bf2357.js","src/data-30bc572b.js","src/queue-65d7cb29.js","src/attributes-f2ee5abc.js","src/event-86cef040.js","src/traversing-9cb22bef.js","src/manipulation-5539f334.js",{flag:"wrap",src:"src/wrap-a9944eb2.js"},{flag:"css",src:"src/css-002a565c.js"},"src/serialize-f19bc56c.js",{flag:"event-alias",src:"src/event-alias-484ee99a.js"},{flag:"ajax",src:"src/ajax-b476cfc6.js"},{flag:"ajax/script",src:"src/ajax/script-8ac7cec2.js",needs:["ajax"]},{flag:"ajax/jsonp",src:"src/ajax/jsonp-2c0534ae.js",needs:["ajax","ajax/script"]},{flag:"ajax/xhr",src:"src/ajax/xhr-cc1fd084.js",needs:["ajax"]},{flag:"effects",src:"src/effects-08707e15.js",needs:["css"]},{flag:"offset",src:"src/offset-32d44dc3.js",needs:["css"]},{flag:"dimensions",src:"src/dimensions-ad9c318d.js",needs:["css"]},{flag:"deprecated",src:"src/deprecated-f57c4873.js"},"src/exports-faaa8e40.js","src/outro-db4ecc4c.js"]}},jshint:{dist:{src:["dist/jquery.js"],options:i},grunt:{src:["Gruntfile-55cf185f.js"],options:{jshintrc:".jshintrc"}},tests:{src:["test/data/{test,testinit,testrunner}.js","test/unit/**/*.js"],options:{jshintrc:"test/.jshintrc"}}},testswarm:{tests:"ajax attributes callbacks core css data deferred dimensions effects event manipulation offset queue selector serialize support traversing Sizzle".split(" ")},watch:{files:["<%= jshint.grunt.src %>","<%= jshint.tests.src %>","src/**/*.js"],tasks:"dev"},"pre-uglify":{all:{files:{"dist/jquery.pre-min.js":["dist/jquery.js"]},options:{banner:"\n\n\n\n\n\n\n\n\n\n/*! jQuery v<%= pkg.version %> | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license\n//@ sourceMappingURL=jquery.min.map\n*/\n"}}},uglify:{all:{files:{"dist/jquery.min.js":["dist/jquery.pre-min.js"]},options:{preserveComments:"some",sourceMap:"dist/jquery.min.map",sourceMappingURL:"jquery.min.map",report:"min",beautify:{ascii_only:!0},compress:{hoist_funs:!1,join_vars:!1,loops:!1,unused:!1}}}},"post-uglify":{all:{files:{"dist/jquery.min.map.tmp":["dist/jquery.min.map"],"dist/jquery.min.js.tmp":["dist/jquery.min.js"]},options:{tempFiles:["dist/jquery.min.map.tmp","dist/jquery.min.js.tmp","dist/jquery.pre-min.js"]}}}}),e.registerTask("testswarm",function(s,r){var t,i=require("testswarm"),n={},a=this.async(),c=/PR-(\d+)/.exec(s),o=e.file.readJSON(r).jquery,l=e.config([this.name,"tests"]);t=c?"jQuery pull <a href='https://github.com/jquery/jquery/pull/"+c[1]+"'>#"+c[1]+"</a>":"jQuery commit #<a href='https://github.com/jquery/jquery/commit/"+s+"'>"+s.substr(0,10)+"</a>",l.forEach(function(e){n[e]=o.testUrl+s+"/test/index.html?module="+e}),i.createClient({url:o.swarmUrl,pollInterval:1e4,timeout:18e5}).addReporter(i.reporters.cli).auth({id:o.authUsername,token:o.authToken}).addjob({name:t,runs:n,runMax:o.runMax,browserSets:o.browserSets},function(s,r){s&&e.log.error(s),a(r)})}),e.registerTask("selector","Build Sizzle-based selector module",function(){var s,r,t=e.config("selector"),i=t.destFile,n={api:e.file.read(t.apiFile),src:e.file.read(t.srcFile)};return r=n.src.split("// EXPOSE"),r[1]=n.api,s=r.join(""),e.verbose.writeln("Injected "+t.apiFile+" into "+t.srcFile),e.file.write(i,s.replace(/\x0d\x0a/g,"\n")),this.errorCount?!1:void e.log.writeln("File '"+i+"' created.")}),e.registerTask("custom",function(){var s=this.async(),r=[].slice.call(arguments),t=r.length?r[0].replace(/,/g,":"):"";e.log.writeln("Creating custom build...\n"),e.util.spawn({grunt:!0,args:["build:*:*:"+t,"pre-uglify","uglify","dist"]},function(r,t){return r?(e.verbose.error(),void s(r)):(e.log.writeln(t.stdout.replace("Done, without errors.","")),void s())})}),e.registerMultiTask("build","Concatenate source (include/exclude modules with +/- flags), embed date/version",function(){var s="",r=this.flags,t=!r["*"],i=t||Object.keys(r).length>1,n=this.data.dest,a=this.data.src,c={},o={},l=e.config("pkg.version"),u=function(e,s){!t||r[e]||r["+"+e]||(o[e]=!1),o[s]||r["-"+e]?o[e]=!0:o[s]===!1&&(r[e]||r["+"+e])&&(delete o[s],c[s]&&c[s].forEach(function(e){r[s]=!0,u(s,e)}))};return process.env.COMMIT&&(l+=" "+process.env.COMMIT),a.forEach(function(e){var s=e.flag;s&&(u(s),e.needs&&(c[s]=e.needs,e.needs.forEach(function(e){u(s,e)})))}),Object.keys(o).length&&(l+=" -"+Object.keys(o).join(",-"),e.config.set("pkg.version",l)),a.forEach(function(t){var n=t.flag,a=!1,c=!1,l=[];n&&(void 0!==o[n]&&(l.push([("Excluding "+n).red,("("+t.src+")").grey]),a=!0,c=!t.alt,c||(n+=" alternate",t.src=t.alt)),void 0===o[n]&&(l.push([("Including "+n).green,("("+t.src+")").grey]),r["+"+n]&&(a=!0)),t=t.src,i&&a&&l.forEach(function(s){e.log.writetableln([27,30],s)})),c||(s+=e.file.read(t))}),s=s.replace(/@VERSION/g,l).replace(/@DATE/g,(new Date).toISOString().replace(/:\d+\.\d+Z$/,"Z")),e.file.write(n,s),this.errorCount?!1:void e.log.writeln("File '"+n+"' created.")}),e.registerTask("dist",function(){var r,t,i,n,a;return r=Object.keys(e.config("dst")),t=Object.keys(this.flags),i=[].concat(r,t).filter(function(e){return"*"!==e}),n=require("fs"),a=!1,s.forEach(function(s){var r,t,c=n.readFileSync(s,"utf8");if(/\x0d\x0a/.test(c)&&(e.log.writeln(s+": Incorrect line endings (\\r\\n)"),a=!0),c.length!==Buffer.byteLength(c,"utf8")){for(e.log.writeln(s+": Non-ASCII characters detected:"),r=0;r<c.length;r++)if(t=c.charCodeAt(r),t>127){e.log.writeln("- position "+r+": "+t),e.log.writeln("-- "+c.substring(r-20,r+20));break}a=!0}/\.map$/.test(s)?(c=c.replace(/"dist\//g,'"'),n.writeFileSync(s,c,"utf-8")):/\.min\.js$/.test(s)&&(r=0,c=c.replace(/(?:\/\*|)\n?\/\/@\s*sourceMappingURL=.*(\n\*\/|)/g,function(e){return r++?"":e}),n.writeFileSync(s,c,"utf-8")),i.forEach(function(r){var t;/\/$/.test(r)||(r+="/"),t=r+s.replace("dist/",""),e.file.write(t,c),e.log.writeln("File '"+t+"' created.")})}),!a}),e.registerMultiTask("pre-uglify",function(){var s=this.options().banner;this.files.forEach(function(r){var t=r.src.map(function(s){var r=e.file.read(s);return r.replace(/^\/\*!(?:.|\n)*?\*\/\n?/g,"").replace(/^\/\*!(?:.|\n)*?\*\/\n?/gm,function(e){return e.replace(/[^\n]/gm,"")})}).join("\n");e.file.write(r.dest,(s||"")+t)})}),e.registerMultiTask("post-uglify",function(){var s=require("fs");this.files.forEach(function(r){var t=r.src[0];s.renameSync(t,r.dest),e.file.write(t,e.file.read(r.dest).replace(/"dist\//g,'"').replace(/\.pre-min\./g,".").replace(/\/\/@ sourceMappingURL=jquery\.min\.map$/g,""))}),this.options().tempFiles.forEach(function(e){s.unlink(e)})}),e.loadNpmTasks("grunt-compare-size"),e.loadNpmTasks("grunt-git-authors"),e.loadNpmTasks("grunt-update-submodules"),e.loadNpmTasks("grunt-contrib-watch"),e.loadNpmTasks("grunt-contrib-jshint"),e.loadNpmTasks("grunt-contrib-uglify"),e.registerTask("default",["update_submodules","selector","build:*:*","jshint","pre-uglify","uglify","post-uglify","dist:*","compare_size"]),e.registerTask("dev",["selector","build:*:*","jshint"])};