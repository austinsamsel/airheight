jQuery.fx&&(module("effects",{teardown:moduleTeardown}),test("sanity check",function(){expect(1),ok(3===jQuery("#dl:visible, #qunit-fixture:visible, #foo:visible").length,"QUnit state is correct for testing effects")}),test("show()",function(){expect(26);var e=jQuery("div.hidden");e.hide().show(),equal(e.css("display"),"block","Make sure a pre-hidden div is visible.");var t=jQuery("<div>").hide().appendTo("#qunit-fixture").show();equal(t.css("display"),"block","Make sure pre-hidden divs show"),QUnit.reset(),e=jQuery("div.hidden"),equal(jQuery.css(e[0],"display"),"none","hiddendiv is display: none"),e.css("display","block"),equal(jQuery.css(e[0],"display"),"block","hiddendiv is display: block"),e.show(),equal(jQuery.css(e[0],"display"),"block","hiddendiv is display: block"),e.css("display","");var i=!0;t=jQuery("#qunit-fixture div"),t.show().each(function(){"none"==this.style.display&&(i=!1)}),ok(i,"Show");var a={"null speed":null,"undefined speed":void 0,"false speed":!1};jQuery.each(a,function(e,a){i=!0,t.hide().show(a).each(function(){"none"==this.style.display&&(i=!1)}),ok(i,"Show with "+e)}),jQuery.each(a,function(e,a){i=!0,t.hide().show(a,function(){i=!1}),ok(i,"Show with "+e+" does not call animate callback")}),jQuery("#qunit-fixture").append("<div id='show-tests'><div><p><a href='#'></a></p><code></code><pre></pre><span></span></div><table><thead><tr><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table><ul><li></li></ul></div><table id='test-table'></table>");var n="table"!==jQuery("#test-table").show().css("display");jQuery("#test-table").remove();var o={div:"block",p:"block",a:"inline",code:"inline",pre:"block",span:"inline",table:n?"block":"table",thead:n?"block":"table-header-group",tbody:n?"block":"table-row-group",tr:n?"block":"table-row",th:n?"block":"table-cell",td:n?"block":"table-cell",ul:"block",li:n?"block":"list-item"};jQuery.each(o,function(e,t){var i=jQuery(e,"#show-tests").show();equal(i.css("display"),t,"Show using correct display type for "+e)}),jQuery("#show-tests").remove(),jQuery("<div>test</div> text <span>test</span>").show().remove(),jQuery("<div>test</div> text <span>test</span>").hide().remove()}),test("show(Number) - other displays",function(){expect(15),QUnit.reset(),stop(),jQuery("#qunit-fixture").append("<div id='show-tests'><div><p><a href='#'></a></p><code></code><pre></pre><span></span></div><table><thead><tr><th></th></tr></thead><tbody><tr><td></td></tr></tbody></table><ul><li></li></ul></div><table id='test-table'></table>");var e="table"!==jQuery("#test-table").show().css("display"),t=0;jQuery("#test-table").remove();var i={div:"block",p:"block",a:"inline",code:"inline",pre:"block",span:"inline",table:e?"block":"table",thead:e?"block":"table-header-group",tbody:e?"block":"table-row-group",tr:e?"block":"table-row",th:e?"block":"table-cell",td:e?"block":"table-cell",ul:"block",li:e?"block":"list-item"};jQuery.each(i,function(e,i){var a=jQuery(e,"#show-tests").show(1,function(){equal(a.css("display"),i,"Show using correct display type for "+e),15===++t&&start()})}),jQuery("#show-tests").remove()}),test("Persist correct display value",function(){expect(3),QUnit.reset(),stop(),jQuery("#qunit-fixture").append("<div id='show-tests'><span style='position:absolute;'>foo</span></div>");var e=jQuery("#show-tests span"),t=e.css("display"),i="";e.show(),i=e.css("display"),e.hide(),e.fadeIn(100,function(){equal(e.css("display"),i,"Expecting display: "+i),e.fadeOut(100,function(){equal(e.css("display"),t,"Expecting display: "+t),e.fadeIn(100,function(){equal(e.css("display"),i,"Expecting display: "+i),start()})})})}),test("animate(Hash, Object, Function)",function(){expect(1),stop();var e={opacity:"show"},t=jQuery.extend({},e);jQuery("#foo").animate(e,0,function(){equal(e.opacity,t.opacity,"Check if animate changed the hash parameter"),start()})}),test("animate negative height",function(){expect(1),stop(),jQuery("#foo").animate({height:-100},100,function(){equal(this.offsetHeight,0,"Verify height."),start()})}),test("animate negative margin",function(){expect(1),stop(),jQuery("#foo").animate({marginTop:-100},100,function(){equal(jQuery(this).css("marginTop"),"-100px","Verify margin."),start()})}),test("animate negative margin with px",function(){expect(1),stop(),jQuery("#foo").animate({marginTop:"-100px"},100,function(){equal(jQuery(this).css("marginTop"),"-100px","Verify margin."),start()})}),test("animate negative padding",function(){expect(1),stop(),jQuery("#foo").animate({paddingBottom:-100},100,function(){equal(jQuery(this).css("paddingBottom"),"0px","Verify paddingBottom."),start()})}),test("animate block as inline width/height",function(){expect(3);var e=jQuery("<span>").css("display","inline-block").appendTo("body"),t=e.css("display");e.remove(),jQuery.support.inlineBlockNeedsLayout||"inline-block"===t?(stop(),jQuery("#foo").css({display:"inline",width:"",height:""}).animate({width:42,height:42},100,function(){equal(jQuery(this).css("display"),jQuery.support.inlineBlockNeedsLayout?"inline":"inline-block","inline-block was set on non-floated inline element when animating width/height"),equal(this.offsetWidth,42,"width was animated"),equal(this.offsetHeight,42,"height was animated"),start()})):(ok(!0,"Browser doesn't support inline-block"),ok(!0,"Browser doesn't support inline-block"),ok(!0,"Browser doesn't support inline-block"))}),test("animate native inline width/height",function(){expect(3);var e=jQuery("<span>").css("display","inline-block").appendTo("body"),t=e.css("display");e.remove(),jQuery.support.inlineBlockNeedsLayout||"inline-block"===t?(stop(),jQuery("#foo").css({display:"",width:"",height:""}).append("<span>text</span>").children("span").animate({width:42,height:42},100,function(){equal(jQuery(this).css("display"),"inline-block","inline-block was set on non-floated inline element when animating width/height"),equal(this.offsetWidth,42,"width was animated"),equal(this.offsetHeight,42,"height was animated"),start()})):(ok(!0,"Browser doesn't support inline-block"),ok(!0,"Browser doesn't support inline-block"),ok(!0,"Browser doesn't support inline-block"))}),test("animate block width/height",function(){expect(3),stop(),jQuery("#foo").css({display:"block",width:20,height:20}).animate({width:42,height:42},100,function(){equal(jQuery(this).css("display"),"block","inline-block was not set on block element when animating width/height"),equal(this.offsetWidth,42,"width was animated"),equal(this.offsetHeight,42,"height was animated"),start()})}),test("animate table width/height",function(){expect(1),stop();var e="table"!==jQuery("#table").css("display")?"block":"table";jQuery("#table").animate({width:42,height:42},100,function(){equal(jQuery(this).css("display"),e,"display mode is correct"),start()})}),test("animate table-row width/height",function(){expect(3),stop();var e=jQuery("#table").attr({cellspacing:0,cellpadding:0,border:0}).html("<tr style='height:42px;'><td style='padding:0;'><div style='width:20px;height:20px;'></div></td></tr>").find("tr"),t="table-row"!==e.css("display")?"block":"table-row";e.animate({width:10,height:10},100,function(){equal(jQuery(this).css("display"),t,"display mode is correct"),equal(this.offsetWidth,20,"width animated to shrink wrap point"),equal(this.offsetHeight,20,"height animated to shrink wrap point"),start()})}),test("animate table-cell width/height",function(){expect(3),stop();var e=jQuery("#table").attr({cellspacing:0,cellpadding:0,border:0}).html("<tr><td style='width:42px;height:42px;padding:0;'><div style='width:20px;height:20px;'></div></td></tr>").find("td"),t="table-cell"!==e.css("display")?"block":"table-cell";e.animate({width:10,height:10},100,function(){equal(jQuery(this).css("display"),t,"display mode is correct"),equal(this.offsetWidth,20,"width animated to shrink wrap point"),equal(this.offsetHeight,20,"height animated to shrink wrap point"),start()})}),test("animate percentage(%) on width/height",function(){expect(2);var e=jQuery("<div style='position:absolute;top:-999px;left:-999px;width:60px;height:60px;'><div style='width:50%;height:50%;'></div></div>").appendTo("#qunit-fixture").children("div");stop(),e.animate({width:"25%",height:"25%"},13,function(){var e=jQuery(this);equal(e.css("width"),"15px","Width was animated to 15px rather than 25px"),equal(e.css("height"),"15px","Height was animated to 15px rather than 25px"),start()})}),test("animate resets overflow-x and overflow-y when finished",function(){expect(2),stop(),jQuery("#foo").css({display:"block",width:20,height:20,overflowX:"visible",overflowY:"auto"}).animate({width:42,height:42},100,function(){equal(this.style.overflowX,"visible","overflow-x is visible"),equal(this.style.overflowY,"auto","overflow-y is auto"),start()})}),asyncTest("animate option { queue: false }",function(){expect(2);var e=jQuery("#foo");e.animate({fontSize:"2em"},{queue:!1,duration:10,complete:function(){ok(!0,"Animation Completed"),start()}}),equal(e.queue().length,0,"Queue is empty")}),asyncTest("animate option { queue: true }",function(){expect(2);var e=jQuery("#foo");e.animate({fontSize:"2em"},{queue:!0,duration:10,complete:function(){ok(!0,"Animation Completed"),start()}}),notEqual(e.queue().length,0,"Default queue is not empty")}),asyncTest("animate option { queue: 'name' }",function(){expect(5);var e=jQuery("#foo"),t=parseFloat(e.css("width")),i=[];e.animate({width:t+100},{queue:"name",duration:1,complete:function(){i.push(2),equal(parseFloat(e.css("width")),t+100,"Animation ended"),equal(e.queue("name").length,1,"Queue length of 'name' queue")}}).queue("name",function(){deepEqual(i,[1,2],"Callbacks in expected order"),start()}),setTimeout(function(){i.push(1),equal(parseFloat(e.css("width")),t,"Animation does not start on its own."),equal(e.queue("name").length,2,"Queue length of 'name' queue"),e.dequeue("name")},100)}),test("animate with no properties",function(){expect(2);var e=jQuery("div"),t=0;e.animate({},function(){t++}),equal(e.length,t,"Make sure that callback is called for each element in the set."),stop();var i=jQuery("#foo");i.animate({}),i.animate({top:10},100,function(){ok(!0,"Animation was properly dequeued."),start()})}),test("animate duration 0",function(){expect(11),stop();var e=jQuery([{a:0},{a:0}]),t=0;equal(jQuery.timers.length,0,"Make sure no animation was running from another test"),e.eq(0).animate({a:1},0,function(){ok(!0,"Animate a simple property."),t++}),equal(jQuery.timers.length,0,"Make sure synchronic animations are not left on jQuery.timers"),equal(t,1,"One synchronic animations"),e.animate({a:2},0,function(){ok(!0,"Animate a second simple property."),t++}),equal(t,3,"Multiple synchronic animations"),e.eq(0).animate({a:3},0,function(){ok(!0,"Animate a third simple property."),t++}),e.eq(1).animate({a:3},200,function(){t++,equal(t,5,"One synchronic and one asynchronic"),start()});var i=jQuery("<div />");i.show(0,function(){ok(!0,"Show callback with no duration")}),i.hide(0,function(){ok(!0,"Hide callback with no duration")}),i.remove()}),test("animate hyphenated properties",function(){expect(1),stop(),jQuery("#foo").css("font-size",10).animate({"font-size":20},200,function(){equal(this.style.fontSize,"20px","The font-size property was animated."),start()})}),test("animate non-element",function(){expect(1),stop();var e={test:0};jQuery(e).animate({test:200},200,function(){equal(e.test,200,"The custom property should be modified."),start()})}),test("stop()",function(){expect(4),stop();var e=jQuery("#foo"),t=2,i=0;e.hide().css("width",200).animate({width:"show"},1500),setTimeout(function(){var a=e.css("width");notEqual(parseFloat(a),i,"An animation occurred "+a+" "+i+"px"),e.stop(),a=e.css("width"),notEqual(parseFloat(a),i,"Stop didn't reset the animation "+a+" "+i+"px"),setTimeout(function(){e.removeData(),e.removeData(void 0,!0),equal(a,e.css("width"),"The animation didn't continue"),0===--t&&start()},100)},100);var a=jQuery("#fadein"),n=jQuery("#show");a.fadeTo(100,0,function(){a.stop()}),setTimeout(function(){n.fadeTo(100,0,function(){equal(n.css("opacity"),"0","Stop does not interfere with animations on other elements (#6641)"),a.add(n).css("opacity",""),0===--t&&start()})},50)}),test("stop() - several in queue",function(){expect(5);var e,t,i=jQuery("#foo");for(i.hide().css("width",800),i.animate({width:"show"},400,"linear"),i.animate({width:"hide"}),i.animate({width:"show"}),t=jQuery.now();t===jQuery.now(););jQuery.fx.tick(),equal(i.queue().length,3,"3 in the queue"),e=i.css("width"),notEqual(parseFloat(e),1,"An animation occurred "+e),i.stop(),equal(i.queue().length,2,"2 in the queue"),e=i.css("width"),notEqual(parseFloat(e),1,"Stop didn't reset the animation "+e),i.stop(!0),equal(i.queue().length,0,"0 in the queue")}),test("stop(clearQueue)",function(){expect(4),stop();var e=jQuery("#foo"),t=0;e.hide().css("width",200).css("width"),e.animate({width:"show"},1e3),e.animate({width:"hide"},1e3),e.animate({width:"show"},1e3),setTimeout(function(){var i=e.css("width");ok(parseFloat(i)!=t,"An animation occurred "+i+" "+t+"px"),e.stop(!0),i=e.css("width"),ok(parseFloat(i)!=t,"Stop didn't reset the animation "+i+" "+t+"px"),equal(e.queue().length,0,"The animation queue was cleared"),setTimeout(function(){equal(i,e.css("width"),"The animation didn't continue"),start()},100)},100)}),test("stop(clearQueue, gotoEnd)",function(){expect(1),stop();var e=jQuery("#foo"),t=0;e.hide().css("width",200).css("width"),e.animate({width:"show"},1e3),e.animate({width:"hide"},1e3),e.animate({width:"show"},1e3),e.animate({width:"hide"},1e3),setTimeout(function(){var i=e.css("width");ok(parseFloat(i)!=t,"An animation occurred "+i+" "+t+"px"),e.stop(!1,!0),i=e.css("width"),setTimeout(function(){e.stop(!0),start()},100)},100)}),asyncTest("stop( queue, ..., ... ) - Stop single queues",function(){expect(3);var e,t=jQuery("#foo");t.css("width",200).css("height",200),t.animate({width:400},{duration:1e3,complete:function(){equal(parseFloat(t.css("width")),400,"Animation completed for standard queue"),equal(parseFloat(t.css("height")),e,"Height was not changed after the second stop"),start()}}),t.animate({height:400},{duration:1e3,queue:"height"}).dequeue("height").stop("height",!1,!0),equal(parseFloat(t.css("height")),400,"Height was stopped with gotoEnd"),t.animate({height:200},{duration:1e3,queue:"height"}).dequeue("height").stop("height",!1,!1),e=parseFloat(t.css("height"))}),test("toggle()",function(){expect(6);var e=jQuery("#foo");ok(e.is(":visible"),"is visible"),e.toggle(),ok(e.is(":hidden"),"is hidden"),e.toggle(),ok(e.is(":visible"),"is visible again"),e.toggle(!0),ok(e.is(":visible"),"is visible"),e.toggle(!1),ok(e.is(":hidden"),"is hidden"),e.toggle(!0),ok(e.is(":visible"),"is visible again")}),jQuery.checkOverflowDisplay=function(){var e=jQuery.css(this,"overflow");equal(e,"visible","Overflow should be visible: "+e),equal(jQuery.css(this,"display"),"inline","Display shouldn't be tampered with."),jQuery(this).remove(),start()},test("jQuery.fx.prototype.cur() - <1.8 Back Compat",7,function(){var e=jQuery("<div></div>").appendTo("#qunit-fixture").css({color:"#ABC",border:"5px solid black",left:"auto",marginBottom:"-11000px"})[0];equal(new jQuery.fx(e,{},"color").cur(),jQuery.css(e,"color"),"Return the same value as jQuery.css for complex properties (bug #7912)"),strictEqual(new jQuery.fx(e,{},"borderLeftWidth").cur(),5,"Return simple values parsed as Float"),jQuery.cssHooks.backgroundPosition={get:function(){return ok(!0,"hook used"),""}},strictEqual(new jQuery.fx(e,{},"backgroundPosition").cur(),0,"Return 0 when jQuery.css returns an empty string"),delete jQuery.cssHooks.backgroundPosition,strictEqual(new jQuery.fx(e,{},"left").cur(),0,"Return 0 when jQuery.css returns 'auto'"),equal(new jQuery.fx(e,{},"marginBottom").cur(),-11e3,"support negative values < -10000 (bug #7193)"),jQuery(e).remove()}),test("JS Overflow and Display",function(){expect(2),stop(),jQuery.makeTest("JS Overflow and Display").addClass("widewidth").css({overflow:"visible",display:"inline"}).addClass("widewidth").text("Some sample text.").before("text before").after("text after").animate({opacity:.5},"slow",jQuery.checkOverflowDisplay)}),test("CSS Overflow and Display",function(){expect(2),stop(),jQuery.makeTest("CSS Overflow and Display").addClass("overflow inline").addClass("widewidth").text("Some sample text.").before("text before").after("text after").animate({opacity:.5},"slow",jQuery.checkOverflowDisplay)}),jQuery.each({"CSS Auto":function(e,t){return jQuery(e).addClass("auto"+t).text("This is a long string of text."),""},"JS Auto":function(e,t){return jQuery(e).css(t,"").text("This is a long string of text."),""},"CSS 100":function(e,t){return jQuery(e).addClass("large"+t),""},"JS 100":function(e,t){return jQuery(e).css(t,"opacity"===t?1:"100px"),"opacity"===t?1:100},"CSS 50":function(e,t){return jQuery(e).addClass("med"+t),""},"JS 50":function(e,t){return jQuery(e).css(t,"opacity"===t?.5:"50px"),"opacity"===t?.5:50},"CSS 0":function(e,t){return jQuery(e).addClass("no"+t),""},"JS 0":function(e,t){return jQuery(e).css(t,"opacity"===t?0:"0px"),0}},function(e,t){jQuery.each({show:function(e,t){return jQuery(e).hide().addClass("wide"+t),"show"},hide:function(e,t){return jQuery(e).addClass("wide"+t),"hide"},100:function(e,t){return jQuery(e).addClass("wide"+t),"opacity"==t?1:100},50:function(e,t){return"opacity"==t?.5:50},0:function(e){return jQuery(e).addClass("noback"),0}},function(i,a){test(e+" to "+i,function(){var n=jQuery.makeTest(e+" to "+i),o=a(n,"width"),s=t(n,"width"),r=a(n,"height"),u=t(n,"height"),l=a(n,"opacity"),d=t(n,"opacity");""===d&&(d=1);var c=0;"show"==r&&c++,"show"==o&&c++,("hide"==o||"show"==o)&&c++,("hide"==r||"show"==r)&&c++,("hide"==l||"show"==l)&&c++,"hide"==o&&c++,l.constructor==Number&&(c+=2),o.constructor==Number&&(c+=2),r.constructor==Number&&(c+=2),expect(c),stop();var h={width:o,height:r,opacity:l};n.animate(h,50),jQuery.when(n).done(function(i){i=i[0],"show"==o&&equal(i.style.display,"block","Showing, display should block: "+i.style.display),("hide"==o||"show"==o)&&ok(""===s?i.style.width===s:0===i.style.width.indexOf(s),"Width must be reset to "+s+": "+i.style.width),("hide"==r||"show"==r)&&ok(""===u?i.style.height===u:0===i.style.height.indexOf(u),"Height must be reset to "+u+": "+i.style.height);var a=jQuery.style(i,"opacity");if(d!==jQuery.css(i,"opacity")&&(d=t(i,"opacity")),""===d&&(d=1),""===a&&(a=1),("hide"==l||"show"==l)&&equal(a,d,"Opacity must be reset to "+d+": "+a),"hide"==o&&equal(i.style.display,"none","Hiding, display should be none: "+i.style.display),l.constructor==Number&&(equal(a,l,"Final opacity should be "+l+": "+a),ok(""!==jQuery.css(i,"opacity")||a==l,"Opacity should be explicitly set to "+l+", is instead: "+a)),o.constructor==Number){equal(i.style.width,o+"px","Final width should be "+o+": "+i.style.width);var n=jQuery.css(i,"width");ok(""!==i.style.width||n==o,"Width should be explicitly set to "+o+", is instead: "+n)}if(r.constructor==Number){equal(i.style.height,r+"px","Final height should be "+r+": "+i.style.height);var c=jQuery.css(i,"height");ok(""!==i.style.height||c==r,"Height should be explicitly set to "+r+", is instead: "+c)}if("show"==r){var h=jQuery.css(i,"height");jQuery(i).append("<br/>Some more text<br/>and some more..."),/Auto/.test(e)?notEqual(jQuery.css(i,"height"),h,"Make sure height is auto."):equal(jQuery.css(i,"height"),h,"Make sure height is not auto.")}jQuery(i).remove(),start()})})})}),jQuery.fn.saveState=function(e){var t=["opacity","height","width","display","overflow"];return expect(t.length),stop(),this.each(function(){var i=this;i.save={},jQuery.each(t,function(t,a){i.save[a]="overflow"===a&&e?"hidden":i.style[a]||jQuery.css(i,a)})})},jQuery.checkState=function(){var e=this;jQuery.each(this.save,function(t,i){var a=e.style[t]||jQuery.css(e,t);equal(a,i,"Make sure that "+t+" is reset (Old: "+i+" Cur: "+a+")")}),jQuery.removeData(this,"olddisplay",!0),start()},test("Chain fadeOut fadeIn",function(){jQuery("#fadein div").saveState().fadeOut("fast").fadeIn("fast",jQuery.checkState)}),test("Chain fadeIn fadeOut",function(){jQuery("#fadeout div").saveState().fadeIn("fast").fadeOut("fast",jQuery.checkState)}),test("Chain hide show",function(){jQuery("#show div").saveState(jQuery.support.shrinkWrapBlocks).hide("fast").show("fast",jQuery.checkState)}),test("Chain show hide",function(){jQuery("#hide div").saveState(jQuery.support.shrinkWrapBlocks).show("fast").hide("fast",jQuery.checkState)}),test("Chain show hide with easing and callback",function(){jQuery("#hide div").saveState().show("fast").hide("fast","linear",jQuery.checkState)}),test("Chain toggle in",function(){jQuery("#togglein div").saveState(jQuery.support.shrinkWrapBlocks).toggle("fast").toggle("fast",jQuery.checkState)}),test("Chain toggle out",function(){jQuery("#toggleout div").saveState(jQuery.support.shrinkWrapBlocks).toggle("fast").toggle("fast",jQuery.checkState)}),test("Chain toggle out with easing and callback",function(){jQuery("#toggleout div").saveState(jQuery.support.shrinkWrapBlocks).toggle("fast").toggle("fast","linear",jQuery.checkState)}),test("Chain slideDown slideUp",function(){jQuery("#slidedown div").saveState(jQuery.support.shrinkWrapBlocks).slideDown("fast").slideUp("fast",jQuery.checkState)}),test("Chain slideUp slideDown",function(){jQuery("#slideup div").saveState(jQuery.support.shrinkWrapBlocks).slideUp("fast").slideDown("fast",jQuery.checkState)}),test("Chain slideUp slideDown with easing and callback",function(){jQuery("#slideup div").saveState(jQuery.support.shrinkWrapBlocks).slideUp("fast").slideDown("fast","linear",jQuery.checkState)}),test("Chain slideToggle in",function(){jQuery("#slidetogglein div").saveState(jQuery.support.shrinkWrapBlocks).slideToggle("fast").slideToggle("fast",jQuery.checkState)}),test("Chain slideToggle out",function(){jQuery("#slidetoggleout div").saveState(jQuery.support.shrinkWrapBlocks).slideToggle("fast").slideToggle("fast",jQuery.checkState)}),test("Chain fadeToggle in",function(){jQuery("#fadetogglein div").saveState().fadeToggle("fast").fadeToggle("fast",jQuery.checkState)}),test("Chain fadeToggle out",function(){jQuery("#fadetoggleout div").saveState().fadeToggle("fast").fadeToggle("fast",jQuery.checkState)}),test("Chain fadeTo 0.5 1.0 with easing and callback)",function(){jQuery("#fadeto div").saveState().fadeTo("fast",.5).fadeTo("fast",1,"linear",jQuery.checkState)}),jQuery.makeTest=function(e){var t=jQuery("<div></div>").attr("id","test"+jQuery.makeTest.id++).addClass("box");return jQuery("<h4></h4>").text(e).appendTo("#fx-tests").after(t),t},jQuery.makeTest.id=1,test("jQuery.show('fast') doesn't clear radio buttons (bug #1095)",function(){expect(4),stop();var e=jQuery("#checkedtest");e.hide().show("fast",function(){ok(!!jQuery(":radio:first",e).attr("checked"),"Check first radio still checked."),ok(!jQuery(":radio:last",e).attr("checked"),"Check last radio still NOT checked."),ok(!!jQuery(":checkbox:first",e).attr("checked"),"Check first checkbox still checked."),ok(!jQuery(":checkbox:last",e).attr("checked"),"Check last checkbox still NOT checked."),start()})}),jQuery.expandedEach=jQuery.each,jQuery.expandedEach({slideToggle:function(e){return parseFloat(e.css("height"))},fadeToggle:function(e){return e.css("opacity")},toggle:function(e){return parseFloat(e.css("width"))}},function(e,t){test(e+"().stop()."+e+"()",function(){expect(8);var i=2e3;jQuery.each(["in","out"],function(a,n){var o=jQuery("#"+e.toLowerCase()+n),s=t(o);o[e](i),stop(),setTimeout(function(){o.stop(),notEqual(t(o),s,".stop() is called about halfway through animation."),o[e](i,function(){equal(t(o),s,"After doing .stop() halfway through hide, check that state has been saved for returning to original property value."),o.hide()[e](i),setTimeout(function(){o.stop(),notEqual(t(o),s,".stop() is called about halfway through animation."),o[e](i,function(){equal(t(o),s,"After doing .stop() halfway through show, check that state has been saved for returning to original property value."),jQuery.removeData(this,"olddisplay",!0),start()})},i/2)})},i/2)})})}),test("animate with per-property easing",function(){expect(5),stop();var e={a:0,b:0,c:0},t=!1,i=!1,a=!1,n={a:[100,"_test1"],b:[100,"_test2"],c:100};jQuery.easing._test1=function(e){return t=!0,e},jQuery.easing._test2=function(e){return i=!0,e},jQuery.easing._default_test=function(e){return a=!0,e},jQuery(e).animate(n,400,"_default_test",function(){start(),ok(t,"Easing function (_test1) called"),ok(i,"Easing function (_test2) called"),ok(a,"Easing function (_default) called"),equal(n.a[1],"_test1","animate does not change original props (per-property easing would be lost)"),equal(n.b[1],"_test2","animate does not change original props (per-property easing would be lost)")})}),test("animate with CSS shorthand properties",function(){expect(11),stop();var e=0,t=0,i={padding:"10 20 30"},a={padding:["1 2 3","_special"]};jQuery.easing._default=function(t){return t>=1&&e++,t},jQuery.easing._special=function(e){return e>=1&&t++,e},jQuery("#foo").animate(i,200,"_default",function(){equal(this.style.paddingTop,"10px","padding-top was animated"),equal(this.style.paddingLeft,"20px","padding-left was animated"),equal(this.style.paddingRight,"20px","padding-right was animated"),equal(this.style.paddingBottom,"30px","padding-bottom was animated"),equal(e,4,"per-animation default easing called for each property"),e=0}).animate(a,200,"_default",function(){equal(this.style.paddingTop,"1px","padding-top was animated again"),equal(this.style.paddingLeft,"2px","padding-left was animated again"),equal(this.style.paddingRight,"2px","padding-right was animated again"),equal(this.style.paddingBottom,"3px","padding-bottom was animated again"),equal(e,0,"per-animation default easing not called"),equal(t,4,"special easing called for each property"),jQuery(this).css("padding","0"),delete jQuery.easing._default,delete jQuery.easing._special,start()})}),test("hide hidden elements, with animation (bug #7141)",function(){expect(3),QUnit.reset(),stop();var e=jQuery("<div style='display:none'></div>").appendTo("#qunit-fixture");equal(e.css("display"),"none","Element is hidden by default"),e.hide(1,function(){ok(!jQuery._data(e,"olddisplay"),"olddisplay is undefined after hiding an already-hidden element"),e.show(1,function(){equal(e.css("display"),"block","Show a double-hidden element"),start()})})}),test("animate unit-less properties (#4966)",2,function(){stop();var e=jQuery("<div style='z-index: 0; position: absolute;'></div>").appendTo("#qunit-fixture");equal(e.css("z-index"),"0","z-index is 0"),e.animate({zIndex:2},function(){equal(e.css("z-index"),"2","z-index is 2"),start()})}),test("animate properties missing px w/ opacity as last (#9074)",2,function(){function e(e){return parseInt(t.css(e),10)}expect(6),stop();var t=jQuery("<div style='position: absolute; margin-left: 0; left: 0px;'></div>").appendTo("#qunit-fixture");equal(e("marginLeft"),0,"Margin left is 0"),equal(e("left"),0,"Left is 0"),t.animate({left:200,marginLeft:200,opacity:0},2e3),setTimeout(function(){var i=e("marginLeft"),a=e("left");notEqual(i,0,"Margin left is not 0 after partial animate"),notEqual(i,200,"Margin left is not 200 after partial animate"),notEqual(a,0,"Left is not 0 after partial animate"),notEqual(a,200,"Left is not 200 after partial animate"),t.stop().remove(),start()},1e3)}),test("callbacks should fire in correct order (#9100)",function(){stop();{var e=1,t=0;jQuery("<p data-operation='*2'></p><p data-operation='^2'></p>").appendTo("#qunit-fixture").animate({fontSize:12},13,function(){e*="*2"===jQuery(this).data("operation")?2:e,t++,2===t&&(equal(e,4,"test value has been *2 and _then_ ^2"),start())})}}),asyncTest("callbacks that throw exceptions will be removed (#5684)",function(){function e(){}expect(2);var t=jQuery("#foo");t.animate({height:1},1,function(){throw new e}),jQuery.fx.stop(),setTimeout(function(){raises(jQuery.fx.tick,e,"Exception was thrown"),jQuery.fx.tick(),ok(!0,"Test completed without throwing a second exception"),start()},1)}),test("animate will scale margin properties individually",function(){expect(2),stop();var e=jQuery("#foo").css({margin:0,marginLeft:100});ok(e.css("marginLeft")!==e.css("marginRight"),"Sanity Check"),e.animate({margin:200}).stop(),ok(e.css("marginLeft")!==e.css("marginRight"),"The margin properties are different"),e.css({marginLeft:"",marginRight:"",marginTop:"",marginBottom:""}),start()}),test("Do not append px to 'fill-opacity' #9548",1,function(){var e=jQuery("<div>").appendTo("#qunit-fixture");e.css("fill-opacity",0).animate({"fill-opacity":1},0,function(){equal(jQuery(this).css("fill-opacity"),1,"Do not append px to 'fill-opacity'"),e.remove()})}),asyncTest("jQuery.Animation( object, props, opts )",4,function(){var e={foo:0,bar:1,width:100},t={foo:1,bar:0,width:200},i=jQuery.Animation(e,t,{duration:1});i.done(function(){for(var a in t)equal(e[a],t[a],"Animated: "+a);i.done(function(){deepEqual(e,t,"No unexpected properties"),start()})})}),asyncTest("Animate Option: step: function( percent, tween )",1,function(){var e={};jQuery("#foo").animate({prop1:1,prop2:2,prop3:3},{duration:1,step:function(t,i){var a=e[i.prop]=e[i.prop]||[];a[0===t?0:1]=t}}).queue(function(t){deepEqual(e,{prop1:[0,1],prop2:[0,2],prop3:[0,3]},"Step function was called once at 0% and once at 100% for each property"),t(),start()})}),asyncTest("Animate callbacks have correct context",2,function(){var e=jQuery("#foo");e.animate({height:10},10,function(){equal(e[0],this,"Complete callback after stop(true) `this` is element")}).stop(!0,!0),e.animate({height:100},10,function(){equal(e[0],this,"Complete callback `this` is element"),start()})}),asyncTest("User supplied callback called after show when fx off (#8892)",2,function(){var e=jQuery("#foo");jQuery.fx.off=!0,e.hide(),e.fadeIn(500,function(){ok(jQuery(this).is(":visible"),"Element is visible in callback"),e.fadeOut(500,function(){ok(jQuery(this).is(":hidden"),"Element is hidden in callback"),jQuery.fx.off=!1,start()})})}),test("animate should set display for disconnected nodes",function(){expect(18);var e=0,t={toggle:[1],slideToggle:[],fadeIn:[],fadeTo:["fast",.5],slideDown:["fast"],show:[1],animate:[{width:"show"}]},i=[jQuery("<div>test</div>"),jQuery("<div/>"),jQuery('<div style="display:inline"/>'),jQuery('<div style="display:none"/>')];strictEqual(i[0].show()[0].style.display,"block","set display with show() for element with parentNode = document fragment"),strictEqual(i[1].show()[0].style.display,"block","set display with show() for element with parentNode = null"),strictEqual(i[2].show()[0].style.display,"inline","show() should not change display if it already set"),strictEqual(i[3].show()[0].style.display,"block","show() should change display if it already set to none"),jQuery.each(i,function(){jQuery.removeData(this[0],"olddisplay",!0)}),stop(),jQuery.each(t,function(t,i){jQuery.each([jQuery("<div>test</div>"),jQuery("<div/>")],function(){var a=[function(){strictEqual(this.style.display,"block","set display to block with "+t),jQuery.removeData(this,"olddisplay",!0),14===++e&&start()}];jQuery.fn[t].apply(this,i.concat(a))})})}),asyncTest("Animation callback should not show animated element as animated (#7157)",1,function(){var e=jQuery("#foo");e.animate({opacity:0},100,function(){ok(!e.is(":animated"),"The element is not animated"),start()})}),asyncTest("hide called on element within hidden parent should set display to none (#10045)",3,function(){var e=jQuery(".hidden"),t=jQuery("<div>hide</div><div>hide0</div><div>hide1</div>");e.append(t),jQuery.when(t.eq(0).hide(),t.eq(1).hide(0),t.eq(2).hide(1)).done(function(){strictEqual(t.get(0).style.display,"none","hide() called on element within hidden parent should set display to none"),strictEqual(t.get(1).style.display,"none","hide( 0 ) called on element within hidden parent should set display to none"),strictEqual(t.get(2).style.display,"none","hide( 1 ) called on element within hidden parent should set display to none"),t.remove(),start()})}),asyncTest("hide, fadeOut and slideUp called on element width height and width = 0 should set display to none",5,function(){for(var e=jQuery("#foo"),t=0,i=jQuery();5>t;t++)i=i.add('<div style="width:0;height:0;"></div>');e.append(i),jQuery.when(i.eq(0).hide(),i.eq(1).hide(jQuery.noop),i.eq(2).hide(1),i.eq(3).fadeOut(),i.eq(4).slideUp()).done(function(){strictEqual(i.get(0).style.display,"none","hide() called on element width height and width = 0 should set display to none"),strictEqual(i.get(1).style.display,"none","hide( jQuery.noop ) called on element width height and width = 0 should set display to none"),strictEqual(i.get(2).style.display,"none","hide( 1 ) called on element width height and width = 0 should set display to none"),strictEqual(i.get(3).style.display,"none","fadeOut() called on element width height and width = 0 should set display to none"),strictEqual(i.get(4).style.display,"none","slideUp() called on element width height and width = 0 should set display to none"),start()
})}),asyncTest("Handle queue:false promises",10,function(){var e=jQuery("#foo").clone().andSelf(),t=1;e.animate({top:1},{duration:10,queue:!1,complete:function(){ok(t++<=2,"Step one or two")}}).animate({bottom:1},{duration:10,complete:function(){ok(t>2&&5>t,"Step three or four"),t++}}),e.promise().done(function(){equal(t++,5,"steps 1-5: queue:false then queue:fx done"),e.animate({top:10},{duration:10,complete:function(){ok(t>5&&8>t,"Step six or seven"),t++}}).animate({bottom:10},{duration:10,queue:!1,complete:function(){ok(t>7&&10>t,"Step eight or nine"),t++}}).promise().done(function(){equal(t++,10,"steps 6-10: queue:fx then queue:false"),start()})})}),asyncTest("multiple unqueued and promise",4,function(){var e=jQuery("#foo"),t=1;e.animate({marginLeft:300},{duration:500,queue:!1,complete:function(){strictEqual(t++,2,"Step 2")}}).animate({top:100},{duration:1500,queue:!1,complete:function(){strictEqual(t++,3,"Step 3")}}).animate({},{duration:2e3,queue:!1,complete:function(){strictEqual(t++,1,"Step 1")}}).promise().done(function(){strictEqual(t++,4,"Step 4"),start()})}),asyncTest("animate does not change start value for non-px animation (#7109)",1,function(){var e=jQuery("<div><div></div></div>").css({width:284,height:1}).appendTo("#qunit-fixture"),t=e.children().css({fontSize:"98.6in",width:"0.01em",height:1}),i=parseFloat(t.css("width")),a=[];t.animate({width:"0%"},{duration:1,step:function(){a.push(parseFloat(t.css("width")))}}).queue(function(t){var n=a[0]/i;ok(n>.9&&1.1>n,"Starting width was close enough"),t(),e.remove(),start()})}),asyncTest("non-px animation handles non-numeric start (#11971)",2,function(){var e=jQuery("#foo"),t=e.css("backgroundPositionX");return t?void e.animate({backgroundPositionX:"42%"},{duration:1,progress:function(e,i){i||(parseFloat(t)?equal(jQuery.style(this,"backgroundPositionX"),t,"Numeric start preserved"):equal(jQuery.style(this,"backgroundPositionX"),"0%","Non-numeric start zeroed"))},done:function(){equal(jQuery.style(this,"backgroundPositionX"),"42%","End reached"),start()}}):(expect(1),ok(!0,"Style property not understood"),void start())}),asyncTest("Animation callbacks (#11797)",15,function(){var e=jQuery("#foo").children(),t=!1,i=0;e.eq(0).animate({},{duration:1,start:function(){ok(!0,"empty: start")},progress:function(e,t){equal(t,0,"empty: progress 0")},done:function(){ok(!0,"empty: done")},fail:function(){ok(!1,"empty: fail")},always:function(){ok(!0,"empty: always"),t=!0}}),ok(t,"empty: done immediately"),t=!1,e.eq(1).animate({opacity:0},{duration:1,start:function(){ok(!0,"stopped: start")},progress:function(e,t){equal(t,0,"stopped: progress 0")},done:function(){ok(!1,"stopped: done")},fail:function(){ok(!0,"stopped: fail")},always:function(){ok(!0,"stopped: always"),t=!0}}).stop(),ok(t,"stopped: stopped immediately"),e.eq(2).animate({opacity:0},{duration:1,start:function(){ok(!0,"async: start")},progress:function(e,t){(0!==t||1!==i)&&(equal(t,i,"async: progress "+i),i++)},done:function(){ok(!0,"async: done")},fail:function(){ok(!1,"async: fail")},always:function(){ok(!0,"async: always"),start()}})}),test("Animate properly sets overflow hidden when animating width/height (#12117)",4,function(){jQuery.each(["height","width"],function(e,t){jQuery.each([100,0],function(e,i){var a=jQuery("<div>"),n={};n[t]=i,a.animate(n,1),equal(a.css("overflow"),"hidden","overflow: hidden set when animating "+t+" to "+i),a.stop()})})}),test("Each tick of the timer loop uses a fresh time (#12837)",function(){var e,t,i=jQuery({test:0});for(expect(3),i.animate({test:100},{step:function(t,i){ok(i.now!==e,"Current value is not the last value: "+e+" - "+i.now),e=i.now}}),t=jQuery.now();t===jQuery.now(););for(jQuery.fx.tick(),t=jQuery.now();t===jQuery.now(););jQuery.fx.tick(),i.stop()}),test("Animations with 0 duration don't ease (#12273)",1,function(){jQuery.easing.test=function(){ok(!1,"Called easing")},jQuery("#foo").animate({height:100},{duration:0,easing:"test",complete:function(){equal(jQuery(this).height(),100,"Height is 100")}}),delete jQuery.easing.test}),jQuery.map(["toggle","slideToggle","fadeToggle"],function(e){asyncTest("toggle state tests: "+e+" (#8685)",function(){function t(){var t=parseFloat(o.css(n));i=!1,o[e]({duration:5e3,step:function(e,s){s.pos>.1&&s.prop===n&&!i&&(i=!0,equal(s.start,t,n+" starts at "+t+" where it stopped"),equal(s.end,a,n+" ending value is "+a),o.stop())},always:start})}var i,a,n="slideToggle"===e?"height":"opacity",o=jQuery("#foo").height(200);expect(4),o[e]({duration:5e3,step:function(e,t){t.pos>.1&&t.prop===n&&!i&&(i=!0,a=t.start,ok(0!==t.start,n+" is starting at "+a+" on first toggle (non-zero)"),equal(t.end,0,n+" is ending at 0 on first toggle"),o.stop())},always:t})})}));