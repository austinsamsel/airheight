module("core",{teardown:moduleTeardown}),test("Unit Testing Environment",function(){expect(2),ok(hasPHP,"Running in an environment with PHP support. The AJAX tests only run if the environment supports PHP!"),ok(!isLocal,"Unit tests are not ran from file:// (especially in Chrome. If you must test from file:// with Chrome, run it with the --allow-file-access-from-files flag!)")}),test("Basic requirements",function(){expect(7),ok(Array.prototype.push,"Array.push()"),ok(Function.prototype.apply,"Function.apply()"),ok(document.getElementById,"getElementById"),ok(document.getElementsByTagName,"getElementsByTagName"),ok(RegExp,"RegExp"),ok(jQuery,"jQuery"),ok($,"$")}),test("jQuery()",function(){var e,t,n=jQuery("div"),r=jQuery("#qunit-fixture"),o=jQuery("<code/>"),u=jQuery("<img/>"),a=jQuery("<div/><hr/><code/><b/>"),i=!1,l="",s=26,c={click:function(){ok(i,"Click executed.")},text:"test","class":"test2",id:"test3"};for(jQuery.fn.width&&(s++,c.width=10),jQuery.fn.offset&&(s++,c.offset={top:1,left:1}),jQuery.fn.css&&(s+=2,c.css={paddingLeft:1,paddingRight:1}),jQuery.fn.attr&&(s++,c.attr={desired:"very"}),expect(s),equal(jQuery().length,0,"jQuery() === jQuery([])"),equal(jQuery(void 0).length,0,"jQuery(undefined) === jQuery([])"),equal(jQuery(null).length,0,"jQuery(null) === jQuery([])"),equal(jQuery("").length,0,"jQuery('') === jQuery([])"),equal(jQuery("#").length,0,"jQuery('#') === jQuery([])"),equal(jQuery(n).selector,"div","jQuery(jQueryObj) == jQueryObj"),equal(jQuery(window).length,1,"Correct number of elements generated for jQuery(window)"),deepEqual(jQuery("div p",r).get(),q("sndp","en","sap"),"Basic selector with jQuery object as context"),equal(o.length,1,"Correct number of elements generated for code"),equal(o.parent().length,0,"Make sure that the generated HTML has no parent."),equal(u.length,1,"Correct number of elements generated for img"),equal(u.parent().length,0,"Make sure that the generated HTML has no parent."),equal(a.length,4,"Correct number of elements generated for div hr code b"),equal(a.parent().length,0,"Make sure that the generated HTML has no parent."),equal(jQuery([1,2,3]).get(1),2,"Test passing an array to the factory"),equal(jQuery(document.body).get(0),jQuery("body").get(0),"Test passing an html node to the factory"),e=jQuery("<div/>",c),jQuery.fn.width&&equal(e[0].style.width,"10px","jQuery() quick setter width"),jQuery.fn.offset&&equal(e[0].style.top,"1px","jQuery() quick setter offset"),jQuery.fn.css&&(equal(e[0].style.paddingLeft,"1px","jQuery quick setter css"),equal(e[0].style.paddingRight,"1px","jQuery quick setter css")),jQuery.fn.attr&&equal(e[0].getAttribute("desired"),"very","jQuery quick setter attr"),equal(e[0].childNodes.length,1,"jQuery quick setter text"),equal(e[0].firstChild.nodeValue,"test","jQuery quick setter text"),equal(e[0].className,"test2","jQuery() quick setter class"),equal(e[0].id,"test3","jQuery() quick setter id"),i=!0,e.click(),e.remove(),t=0;3>t;++t)e=jQuery("<input type='text' value='TEST' />");for(equal(e[0].defaultValue,"TEST","Ensure cached nodes are cloned properly (Bug #6655)"),e.remove(),equal(jQuery(" <div/> ").length,1,"Make sure whitespace is trimmed."),equal(jQuery(" a<div/>b ").length,1,"Make sure whitespace and other characters are trimmed."),t=0;128>t;t++)l+="12345678";equal(jQuery(" <div>"+l+"</div> ").length,1,"Make sure whitespace is trimmed on long strings."),equal(jQuery(" a<div>"+l+"</div>b ").length,1,"Make sure whitespace and other characters are trimmed on long strings.")}),test("selector state",function(){expect(31);var e;e=jQuery(void 0),equal(e.selector,"","Empty jQuery Selector"),equal(e.context,void 0,"Empty jQuery Context"),e=jQuery(document),equal(e.selector,"","Document Selector"),equal(e.context,document,"Document Context"),e=jQuery(document.body),equal(e.selector,"","Body Selector"),equal(e.context,document.body,"Body Context"),e=jQuery("#qunit-fixture"),equal(e.selector,"#qunit-fixture","#qunit-fixture Selector"),equal(e.context,document,"#qunit-fixture Context"),e=jQuery("#notfoundnono"),equal(e.selector,"#notfoundnono","#notfoundnono Selector"),equal(e.context,document,"#notfoundnono Context"),e=jQuery("#qunit-fixture",document),equal(e.selector,"#qunit-fixture","#qunit-fixture Selector"),equal(e.context,document,"#qunit-fixture Context"),e=jQuery("#qunit-fixture",document.body),equal(e.selector,"#qunit-fixture","#qunit-fixture Selector"),equal(e.context,document.body,"#qunit-fixture Context"),e=jQuery(e),equal(e.selector,"#qunit-fixture","#qunit-fixture Selector"),equal(e.context,document.body,"#qunit-fixture Context"),e=jQuery(document.body).find("#qunit-fixture"),equal(e.selector,"#qunit-fixture","#qunit-fixture find Selector"),equal(e.context,document.body,"#qunit-fixture find Context"),e=jQuery("#qunit-fixture").filter("div"),equal(e.selector,"#qunit-fixture.filter(div)","#qunit-fixture filter Selector"),equal(e.context,document,"#qunit-fixture filter Context"),e=jQuery("#qunit-fixture").not("div"),equal(e.selector,"#qunit-fixture.not(div)","#qunit-fixture not Selector"),equal(e.context,document,"#qunit-fixture not Context"),e=jQuery("#qunit-fixture").filter("div").not("div"),equal(e.selector,"#qunit-fixture.filter(div).not(div)","#qunit-fixture filter, not Selector"),equal(e.context,document,"#qunit-fixture filter, not Context"),e=jQuery("#qunit-fixture").filter("div").not("div").end(),equal(e.selector,"#qunit-fixture.filter(div)","#qunit-fixture filter, not, end Selector"),equal(e.context,document,"#qunit-fixture filter, not, end Context"),e=jQuery("#qunit-fixture").parent("body"),equal(e.selector,"#qunit-fixture.parent(body)","#qunit-fixture parent Selector"),equal(e.context,document,"#qunit-fixture parent Context"),e=jQuery("#qunit-fixture").eq(0),equal(e.selector,"#qunit-fixture.slice(0,1)","#qunit-fixture eq Selector"),equal(e.context,document,"#qunit-fixture eq Context");var t="<div />";equal(jQuery(t).appendTo(jQuery(t)).selector,jQuery(t).appendTo(t).selector,"manipulation methods make same selector for jQuery objects")}),test("globalEval",function(){expect(3),jQuery.globalEval("var globalEvalTest = true;"),ok(window.globalEvalTest,"Test variable declarations are global"),window.globalEvalTest=!1,jQuery.globalEval("globalEvalTest = true;"),ok(window.globalEvalTest,"Test variable assignments are global"),window.globalEvalTest=!1,jQuery.globalEval("this.globalEvalTest = true;"),ok(window.globalEvalTest,"Test context (this) is the window object"),window.globalEvalTest=void 0}),test("noConflict",function(){expect(7);var e=jQuery;equal(jQuery,jQuery.noConflict(),"noConflict returned the jQuery object"),equal(window.jQuery,e,"Make sure jQuery wasn't touched."),equal(window.$,original$,"Make sure $ was reverted."),jQuery=$=e,equal(jQuery.noConflict(!0),e,"noConflict returned the jQuery object"),equal(window.jQuery,originaljQuery,"Make sure jQuery was reverted."),equal(window.$,original$,"Make sure $ was reverted."),ok(e("#qunit-fixture").html("test"),"Make sure that jQuery still works."),window.jQuery=jQuery=e}),test("trim",function(){expect(13);var e=String.fromCharCode(160);equal(jQuery.trim("hello  "),"hello","trailing space"),equal(jQuery.trim("  hello"),"hello","leading space"),equal(jQuery.trim("  hello   "),"hello","space on both sides"),equal(jQuery.trim("  "+e+"hello  "+e+" "),"hello","&nbsp;"),equal(jQuery.trim(),"","Nothing in."),equal(jQuery.trim(void 0),"","Undefined"),equal(jQuery.trim(null),"","Null"),equal(jQuery.trim(5),"5","Number"),equal(jQuery.trim(!1),"false","Boolean"),equal(jQuery.trim(" "),"","space should be trimmed"),equal(jQuery.trim("ipad\xa0"),"ipad","nbsp should be trimmed"),equal(jQuery.trim("\ufeff"),"","zwsp should be trimmed"),equal(jQuery.trim("\ufeff \xa0! | \ufeff"),"! |","leading/trailing should be trimmed")}),test("type",function(){expect(23),equal(jQuery.type(null),"null","null"),equal(jQuery.type(void 0),"undefined","undefined"),equal(jQuery.type(!0),"boolean","Boolean"),equal(jQuery.type(!1),"boolean","Boolean"),equal(jQuery.type(Boolean(!0)),"boolean","Boolean"),equal(jQuery.type(0),"number","Number"),equal(jQuery.type(1),"number","Number"),equal(jQuery.type(Number(1)),"number","Number"),equal(jQuery.type(""),"string","String"),equal(jQuery.type("a"),"string","String"),equal(jQuery.type(String("a")),"string","String"),equal(jQuery.type({}),"object","Object"),equal(jQuery.type(/foo/),"regexp","RegExp"),equal(jQuery.type(new RegExp("asdf")),"regexp","RegExp"),equal(jQuery.type([1]),"array","Array"),equal(jQuery.type(new Date),"date","Date"),equal(jQuery.type(new Function("return;")),"function","Function"),equal(jQuery.type(function(){}),"function","Function"),equal(jQuery.type(window),"object","Window"),equal(jQuery.type(document),"object","Document"),equal(jQuery.type(document.body),"object","Element"),equal(jQuery.type(document.createTextNode("foo")),"object","TextNode"),equal(jQuery.type(document.getElementsByTagName("*")),"object","NodeList")}),asyncTest("isPlainObject",function(){expect(15);var e;ok(jQuery.isPlainObject({}),"{}"),ok(!jQuery.isPlainObject(""),"string"),ok(!jQuery.isPlainObject(0)&&!jQuery.isPlainObject(1),"number"),ok(!jQuery.isPlainObject(!0)&&!jQuery.isPlainObject(!1),"boolean"),ok(!jQuery.isPlainObject(null),"null"),ok(!jQuery.isPlainObject(void 0),"undefined"),ok(!jQuery.isPlainObject([]),"array"),ok(!jQuery.isPlainObject(new Date),"new Date");var t=function(){};ok(!jQuery.isPlainObject(t),"fn");var n=function(){};ok(!jQuery.isPlainObject(new n),"new fn (no methods)"),n.prototype.someMethod=function(){},ok(!jQuery.isPlainObject(new n),"new fn"),ok(!jQuery.isPlainObject(document.createElement("div")),"DOM Element"),ok(!jQuery.isPlainObject(window),"window");try{jQuery.isPlainObject(window.location),ok(!0,"Does not throw exceptions on host objects")}catch(r){ok(!1,"Does not throw exceptions on host objects -- FAIL")}try{e=document.createElement("iframe"),document.body.appendChild(e),window.iframeDone=function(t){ok(jQuery.isPlainObject(new t),"new otherObject"),document.body.removeChild(e),start()};var o=e.contentDocument||e.contentWindow.document;o.open(),o.write("<body onload='window.parent.iframeDone(Object);'>"),o.close()}catch(r){document.body.removeChild(e),ok(!0,"new otherObject - iframes not supported"),start()}}),test("isFunction",function(){function e(e){function t(t){e(t)}ok(jQuery.isFunction(t),"Recursive Function Call"),t({some:"data"})}expect(19),ok(!jQuery.isFunction(),"No Value"),ok(!jQuery.isFunction(null),"null Value"),ok(!jQuery.isFunction(void 0),"undefined Value"),ok(!jQuery.isFunction(""),"Empty String Value"),ok(!jQuery.isFunction(0),"0 Value"),ok(jQuery.isFunction(String),"String Function("+String+")"),ok(jQuery.isFunction(Array),"Array Function("+Array+")"),ok(jQuery.isFunction(Object),"Object Function("+Object+")"),ok(jQuery.isFunction(Function),"Function Function("+Function+")");var t="function";ok(!jQuery.isFunction(t),"Function String");var n=["function"];ok(!jQuery.isFunction(n),"Function Array");var r={"function":"test"};ok(!jQuery.isFunction(r),"Function Object");var o=function(){};ok(jQuery.isFunction(o),"Normal Function");var u=document.createElement("object");ok(!jQuery.isFunction(u),"Object Element");var a=document.body.childNodes;ok(!jQuery.isFunction(a),"childNodes Property");var i=document.body.firstChild;ok(!jQuery.isFunction(i),"A normal DOM Element");var l=document.createElement("input");l.type="text",document.body.appendChild(l),document.body.removeChild(l);var s=document.createElement("a");s.href="some-function",document.body.appendChild(s),ok(!jQuery.isFunction(s),"Anchor Element"),document.body.removeChild(s),e(function(){e(function(){})})}),test("isNumeric",function(){expect(36);var e=jQuery.isNumeric,t=function(e){this.value=e,this.toString=function(){return String(this.value)}},n=new t("42"),r=new t("Devo");ok(e("-10"),"Negative integer string"),ok(e("0"),"Zero string"),ok(e("5"),"Positive integer string"),ok(e(-16),"Negative integer number"),ok(e(0),"Zero integer number"),ok(e(32),"Positive integer number"),ok(e("040"),"Octal integer literal string"),ok(e("0xFF"),"Hexadecimal integer literal string"),ok(e(4095),"Hexadecimal integer literal"),ok(e("-1.6"),"Negative floating point string"),ok(e("4.536"),"Positive floating point string"),ok(e(-2.6),"Negative floating point number"),ok(e(3.1415),"Positive floating point number"),ok(e(8e5),"Exponential notation"),ok(e("123e-2"),"Exponential notation string"),ok(e(n),"Custom .toString returning number"),equal(e(""),!1,"Empty string"),equal(e("        "),!1,"Whitespace characters string"),equal(e("		"),!1,"Tab characters string"),equal(e("abcdefghijklm1234567890"),!1,"Alphanumeric character string"),equal(e("xabcdefx"),!1,"Non-numeric character string"),equal(e(!0),!1,"Boolean true literal"),equal(e(!1),!1,"Boolean false literal"),equal(e("bcfed5.2"),!1,"Number with preceding non-numeric characters"),equal(e("7.2acdgs"),!1,"Number with trailling non-numeric characters"),equal(e(void 0),!1,"Undefined value"),equal(e(null),!1,"Null value"),equal(e(0/0),!1,"NaN value"),equal(e(1/0),!1,"Infinity primitive"),equal(e(Number.POSITIVE_INFINITY),!1,"Positive Infinity"),equal(e(Number.NEGATIVE_INFINITY),!1,"Negative Infinity"),equal(e(r),!1,"Custom .toString returning non-number"),equal(e({}),!1,"Empty object"),equal(e(function(){}),!1,"Instance of a function"),equal(e(new Date),!1,"Instance of a Date"),equal(e(function(){}),!1,"Instance of a function")}),test("isXMLDoc - HTML",function(){expect(4),ok(!jQuery.isXMLDoc(document),"HTML document"),ok(!jQuery.isXMLDoc(document.documentElement),"HTML documentElement"),ok(!jQuery.isXMLDoc(document.body),"HTML Body Element");var e=document.createElement("iframe");document.body.appendChild(e);try{var t=jQuery(e).contents()[0];try{ok(!jQuery.isXMLDoc(t),"Iframe body element")}catch(n){ok(!1,"Iframe body element exception")}}catch(n){ok(!0,"Iframe body element - iframe not working correctly")}document.body.removeChild(e)}),test("XSS via location.hash",function(){expect(1),stop(),jQuery._check9521=function(e){ok(e,"script called from #id-like selector with inline handler"),jQuery("#check9521").remove(),delete jQuery._check9521,start()};try{jQuery('#<img id="check9521" src="no-such-.gif" onerror="jQuery._check9521(false)">').appendTo("#qunit-fixture")}catch(e){jQuery._check9521(!0)}}),test("isXMLDoc - XML",function(){expect(3);var e=createDashboardXML();ok(jQuery.isXMLDoc(e),"XML document"),ok(jQuery.isXMLDoc(e.documentElement),"XML documentElement"),ok(jQuery.isXMLDoc(jQuery("tab",e)[0]),"XML Tab Element")}),test("isWindow",function(){expect(14),ok(jQuery.isWindow(window),"window"),ok(jQuery.isWindow(document.getElementsByTagName("iframe")[0].contentWindow),"iframe.contentWindow"),ok(!jQuery.isWindow(),"empty"),ok(!jQuery.isWindow(null),"null"),ok(!jQuery.isWindow(void 0),"undefined"),ok(!jQuery.isWindow(document),"document"),ok(!jQuery.isWindow(document.documentElement),"documentElement"),ok(!jQuery.isWindow(""),"string"),ok(!jQuery.isWindow(1),"number"),ok(!jQuery.isWindow(!0),"boolean"),ok(!jQuery.isWindow({}),"object"),ok(!jQuery.isWindow({setInterval:function(){}}),"fake window"),ok(!jQuery.isWindow(/window/),"regexp"),ok(!jQuery.isWindow(function(){}),"function")}),test("jQuery('html')",function(){expect(15),QUnit.reset(),jQuery.foo=!1;var e=jQuery("<script>jQuery.foo='test';</script>")[0];ok(e,"Creating a script"),ok(!jQuery.foo,"Make sure the script wasn't executed prematurely"),jQuery("body").append("<script>jQuery.foo='test';</script>"),ok(jQuery.foo,"Executing a scripts contents in the right context");var t=jQuery("<div>\r\nsome text\n<p>some p</p>\nmore text\r\n</div>")[0];equal(t.nodeName.toUpperCase(),"DIV","Make sure we're getting a div."),equal(t.firstChild.nodeType,3,"Text node."),equal(t.lastChild.nodeType,3,"Text node."),equal(t.childNodes[1].nodeType,1,"Paragraph."),equal(t.childNodes[1].firstChild.nodeType,3,"Paragraph text."),QUnit.reset(),ok(jQuery("<link rel='stylesheet'/>")[0],"Creating a link"),ok(!jQuery("<script/>")[0].parentNode,"Create a script"),ok(jQuery("<input/>").attr("type","hidden"),"Create an input and set the type.");var n=jQuery("<span>hi</span> there <!-- mon ami -->");ok(n.length>=2,"Check node,textnode,comment creation (some browsers delete comments)"),ok(!jQuery("<option>test</option>")[0].selected,"Make sure that options are auto-selected #2050"),ok(jQuery("<div></div>")[0],"Create a div with closing tag."),ok(jQuery("<table></table>")[0],"Create a table with closing tag.")}),test("jQuery('massive html #7990')",function(){expect(3);var e,t="<li>very very very very large html string</li>",n=["<ul>"];for(e=0;3e4>e;e+=1)n[n.length]=t;n[n.length]="</ul>",n=jQuery(n.join(""))[0],equal(n.nodeName.toLowerCase(),"ul"),equal(n.firstChild.nodeName.toLowerCase(),"li"),equal(n.childNodes.length,3e4)}),test("jQuery('html', context)",function(){expect(1);var e=jQuery("<div/>")[0],t=jQuery("<span/>",e);equal(t.length,1,"Verify a span created with a div context works, #1763")}),test("jQuery(selector, xml).text(str) - Loaded via XML document",function(){expect(2);var e=createDashboardXML(),t=jQuery("tab",e).eq(0);equal(t.text(),"blabla","Verify initial text correct"),t.text("newtext"),equal(t.text(),"newtext","Verify new text correct")}),test("end()",function(){expect(3),equal("Yahoo",jQuery("#yahoo").parent().end().text(),"Check for end"),ok(jQuery("#yahoo").end(),"Check for end with nothing to end");var e=jQuery("#yahoo");e.parent(),equal("Yahoo",jQuery("#yahoo").text(),"Check for non-destructive behaviour")}),test("length",function(){expect(1),equal(jQuery("#qunit-fixture p").length,6,"Get Number of Elements Found")}),test("size()",function(){expect(1),equal(jQuery("#qunit-fixture p").size(),6,"Get Number of Elements Found")}),test("get()",function(){expect(1),deepEqual(jQuery("#qunit-fixture p").get(),q("firstp","ap","sndp","en","sap","first"),"Get All Elements")}),test("toArray()",function(){expect(1),deepEqual(jQuery("#qunit-fixture p").toArray(),q("firstp","ap","sndp","en","sap","first"),"Convert jQuery object to an Array")}),test("inArray()",function(){expect(19);var e={p:q("firstp","sap","ap","first"),em:q("siblingnext","siblingfirst"),div:q("qunit-testrunner-toolbar","nothiddendiv","nothiddendivchild","foo"),a:q("mark","groups","google","simon1"),empty:[]},t={p:{elem:jQuery("#ap")[0],index:2},em:{elem:jQuery("#siblingfirst")[0],index:1},div:{elem:jQuery("#nothiddendiv")[0],index:1},a:{elem:jQuery("#simon1")[0],index:3}},n={p:jQuery("#liveSpan1")[0],em:jQuery("#nothiddendiv")[0],empty:""};jQuery.each(t,function(t,n){equal(jQuery.inArray(n.elem,e[t]),n.index,"elem is in the array of selections of its tag"),equal(!!~jQuery.inArray(n.elem,e[t],5),!1,"elem is NOT in the array of selections given a starting index greater than its position"),equal(!!~jQuery.inArray(n.elem,e[t],1),!0,"elem is in the array of selections given a starting index less than or equal to its position"),equal(!!~jQuery.inArray(n.elem,e[t],-3),!0,"elem is in the array of selections given a negative index")}),jQuery.each(n,function(t,n){equal(!!~jQuery.inArray(n,e[t]),!1,"elem is NOT in the array of selections")})}),test("get(Number)",function(){expect(2),equal(jQuery("#qunit-fixture p").get(0),document.getElementById("firstp"),"Get A Single Element"),strictEqual(jQuery("#firstp").get(1),void 0,"Try get with index larger elements count")}),test("get(-Number)",function(){expect(2),equal(jQuery("p").get(-1),document.getElementById("first"),"Get a single element with negative index"),strictEqual(jQuery("#firstp").get(-2),void 0,"Try get with index negative index larger then elements count")}),test("each(Function)",function(){expect(1);var e=jQuery("div");e.each(function(){this.foo="zoo"});for(var t=!0,n=0;n<e.size();n++)"zoo"!=e.get(n).foo&&(t=!1);ok(t,"Execute a function, Relative")}),test("slice()",function(){expect(7);var e=jQuery("#ap a");deepEqual(e.slice(1,2).get(),q("groups"),"slice(1,2)"),deepEqual(e.slice(1).get(),q("groups","anchor1","mark"),"slice(1)"),deepEqual(e.slice(0,3).get(),q("google","groups","anchor1"),"slice(0,3)"),deepEqual(e.slice(-1).get(),q("mark"),"slice(-1)"),deepEqual(e.eq(1).get(),q("groups"),"eq(1)"),deepEqual(e.eq("2").get(),q("anchor1"),"eq('2')"),deepEqual(e.eq(-1).get(),q("mark"),"eq(-1)")}),test("first()/last()",function(){expect(4);var e=jQuery("#ap a"),t=jQuery("asdf");deepEqual(e.first().get(),q("google"),"first()"),deepEqual(e.last().get(),q("mark"),"last()"),deepEqual(t.first().get(),[],"first() none"),deepEqual(t.last().get(),[],"last() none")}),test("map()",function(){expect(8),deepEqual(jQuery("#ap").map(function(){return jQuery(this).find("a").get()}).get(),q("google","groups","anchor1","mark"),"Array Map"),deepEqual(jQuery("#ap > a").map(function(){return this.parentNode}).get(),q("ap","ap","ap"),"Single Map");var e,t,n,r,o,u;e=jQuery.map({a:1,b:2},function(e,t){return t}),equal(e.join(""),"ab","Map the keys from a hash to an array"),t=jQuery.map({a:1,b:2},function(e){return e}),equal(t.join(""),"12","Map the values from a hash to an array"),t=jQuery.map({a:1,b:2,length:3},function(e){return e}),equal(t.join(""),"123","Map the values from a hash with a length property to an array"),n=document.getElementsByTagName("script"),o=jQuery.map(n,function(e){return e}),equal(o.length,n.length,"Map an array(-like) to a hash"),r=document.getElementsByTagName("asdf"),o=jQuery.map(r,function(e){return e}),equal(o.length,r.length,"Map an empty array(-like) to a hash"),u=jQuery.map(Array(4),function(e,t){return t%2?t:[t,t,t]}),equal(u.join(""),"00012223","try the new flatten technique(#2616)")}),test("jQuery.merge()",function(){expect(8);var e=jQuery.merge;deepEqual(e([],[]),[],"Empty arrays"),deepEqual(e([1],[2]),[1,2],"Basic"),deepEqual(e([1,2],[3,4]),[1,2,3,4],"Basic"),deepEqual(e([1,2],[]),[1,2],"Second empty"),deepEqual(e([],[1,2]),[1,2],"First empty"),deepEqual(e([-2,-1],[0,1,2]),[-2,-1,0,1,2],"Second array including a zero (falsy)"),deepEqual(e([],[null,void 0]),[null,void 0],"Second array including null and undefined values"),deepEqual(e({length:0},[1,2]),{length:2,0:1,1:2},"First array like")}),test("jQuery.extend(Object, Object)",function(){function e(){}expect(28);var t={xnumber1:5,xnumber2:7,xstring1:"peter",xstring2:"pan"},n={xnumber2:1,xstring2:"x",xxx:"newstring"},r={xnumber2:1,xstring2:"x",xxx:"newstring"},o={xnumber1:5,xnumber2:1,xstring1:"peter",xstring2:"x",xxx:"newstring"},u={foo:{bar:!0}},a={foo:{baz:!0},foo2:document},i={foo:{baz:!0},foo2:document},l={foo:{bar:!0,baz:!0},foo2:document},s=[1,2,3],c={arr:s};jQuery.extend(t,n),deepEqual(t,o,"Check if extended: settings must be extended"),deepEqual(n,r,"Check if not modified: options must not be modified"),jQuery.extend(t,null,n),deepEqual(t,o,"Check if extended: settings must be extended"),deepEqual(n,r,"Check if not modified: options must not be modified"),jQuery.extend(!0,u,a),deepEqual(u.foo,l.foo,"Check if foo: settings must be extended"),deepEqual(a.foo,i.foo,"Check if not deep2: options must not be modified"),equal(u.foo2,document,"Make sure that a deep clone was not attempted on the document"),ok(jQuery.extend(!0,{},c).arr!==s,"Deep extend of object must clone child array"),ok(jQuery.isArray(jQuery.extend(!0,{arr:{}},c).arr),"Cloned array heve to be an Array"),ok(jQuery.isPlainObject(jQuery.extend(!0,{arr:s},{arr:{}}).arr),"Cloned object heve to be an plain object");var d={},y={foo:{length:-1}};jQuery.extend(!0,d,y),deepEqual(d.foo,y.foo,"The length property must copy correctly"),d={};var m={foo:{date:new Date}};jQuery.extend(!0,d,m),deepEqual(d.foo,m.foo,"Dates copy correctly");var p=function(){},f=new p,j={foo:{date:f}};d={},jQuery.extend(!0,d,j),ok(d.foo&&d.foo.date===f,"Custom objects copy correctly (no methods)"),p.prototype={someMethod:function(){}},d={},jQuery.extend(!0,d,j),ok(d.foo&&d.foo.date===f,"Custom objects copy correctly");var h=Number,Q=jQuery.extend(!0,{foo:4},{foo:new h(5)});ok(5==Q.foo,"Wrapped numbers copy correctly");var g;g=jQuery.extend({},n,{xnumber2:null}),ok(null===g.xnumber2,"Check to make sure null values are copied"),g=jQuery.extend({},n,{xnumber2:void 0}),ok(g.xnumber2===n.xnumber2,"Check to make sure undefined values are not copied"),g=jQuery.extend({},n,{xnumber0:null}),ok(null===g.xnumber0,"Check to make sure null values are inserted");var q={},b={foo:q,bar:5};jQuery.extend(!0,q,b),deepEqual(q,{bar:5},"Check to make sure a recursive obj doesn't go never-ending loop by not copying it over"),Q=jQuery.extend(!0,{foo:[]},{foo:[0]}),equal(Q.foo.length,1,"Check to make sure a value with coersion 'false' copies over when necessary to fix #1907"),Q=jQuery.extend(!0,{foo:"1,2,3"},{foo:[1,2,3]}),ok("string"!=typeof Q.foo,"Check to make sure values equal with coersion (but not actually equal) overwrite correctly"),Q=jQuery.extend(!0,{foo:"bar"},{foo:null}),ok("undefined"!=typeof Q.foo,"Make sure a null value doesn't crash with deep extend, for #1908");var x={foo:null};jQuery.extend(!0,x,{foo:"notnull"}),equal(x.foo,"notnull","Make sure a null value can be overwritten"),jQuery.extend(e,{key:"value"}),equal(e.key,"value","Verify a function can be extended");var k={xnumber1:5,xnumber2:7,xstring1:"peter",xstring2:"pan"},v={xnumber1:5,xnumber2:7,xstring1:"peter",xstring2:"pan"},w={xnumber2:1,xstring2:"x"},E={xnumber2:1,xstring2:"x"},M={xstring2:"xx",xxx:"newstringx"},S={xstring2:"xx",xxx:"newstringx"},C={xnumber1:5,xnumber2:1,xstring1:"peter",xstring2:"xx",xxx:"newstringx"};t=jQuery.extend({},k,w,M),deepEqual(t,C,"Check if extended: settings must be extended"),deepEqual(k,v,"Check if not modified: options1 must not be modified"),deepEqual(w,E,"Check if not modified: options1 must not be modified"),deepEqual(M,S,"Check if not modified: options2 must not be modified")}),test("jQuery.each(Object,Function)",function(){expect(14),jQuery.each([0,1,2],function(e,t){equal(e,t,"Check array iteration")}),jQuery.each([5,6,7],function(e,t){equal(e,t-5,"Check array iteration")}),jQuery.each({name:"name",lang:"lang"},function(e,t){equal(e,t,"Check object iteration")});var e=0;jQuery.each([1,2,3],function(t,n){e+=n}),equal(e,6,"Looping over an array"),e=0,jQuery.each([1,2,3],function(t,n){return e+=n,1==t?!1:void 0}),equal(e,3,"Looping over an array, with break"),e=0,jQuery.each({a:1,b:2,c:3},function(t,n){e+=n}),equal(e,6,"Looping over an object"),e=0,jQuery.each({a:3,b:3,c:3},function(t,n){return e+=n,!1}),equal(e,3,"Looping over an object, with break");var t=function(){};t.foo="bar",jQuery.each(t,function(e){t[e]="baz"}),equal("baz",t.foo,"Loop over a function");var n=0;jQuery.each(document.styleSheets,function(){n++}),equal(n,2,"should not throw an error in IE while looping over document.styleSheets and return proper amount")}),test("jQuery.makeArray",function(){expect(17),equal(jQuery.makeArray(jQuery("html>*"))[0].nodeName.toUpperCase(),"HEAD","Pass makeArray a jQuery object"),equal(jQuery.makeArray(document.getElementsByName("PWD")).slice(0,1)[0].name,"PWD","Pass makeArray a nodelist"),equal(function(){return jQuery.makeArray(arguments)}(1,2).join(""),"12","Pass makeArray an arguments array"),equal(jQuery.makeArray([1,2,3]).join(""),"123","Pass makeArray a real array"),equal(jQuery.makeArray().length,0,"Pass nothing to makeArray and expect an empty array"),equal(jQuery.makeArray(0)[0],0,"Pass makeArray a number"),equal(jQuery.makeArray("foo")[0],"foo","Pass makeArray a string"),equal(jQuery.makeArray(!0)[0].constructor,Boolean,"Pass makeArray a boolean"),equal(jQuery.makeArray(document.createElement("div"))[0].nodeName.toUpperCase(),"DIV","Pass makeArray a single node"),equal(jQuery.makeArray({length:2,0:"a",1:"b"}).join(""),"ab","Pass makeArray an array like map (with length)"),ok(!!jQuery.makeArray(document.documentElement.childNodes).slice(0,1)[0].nodeName,"Pass makeArray a childNodes array"),equal(jQuery.makeArray(function(){return 1})[0](),1,"Pass makeArray a function"),equal(jQuery.makeArray(window)[0],window,"Pass makeArray the window"),equal(jQuery.makeArray(/a/)[0].constructor,RegExp,"Pass makeArray a regex"),ok(jQuery.makeArray(document.getElementById("form")).length>=13,"Pass makeArray a form (treat as elements)"),deepEqual(jQuery.makeArray({length:"0"}),[],"Make sure object is coerced properly."),deepEqual(jQuery.makeArray({length:"5"}),[],"Make sure object is coerced properly.")}),test("jQuery.inArray",function(){expect(3),equal(jQuery.inArray(0,!1),-1,"Search in 'false' as array returns -1 and doesn't throw exception"),equal(jQuery.inArray(0,null),-1,"Search in 'null' as array returns -1 and doesn't throw exception"),equal(jQuery.inArray(0,void 0),-1,"Search in 'undefined' as array returns -1 and doesn't throw exception")}),test("jQuery.isEmptyObject",function(){expect(2),equal(!0,jQuery.isEmptyObject({}),"isEmptyObject on empty object literal"),equal(!1,jQuery.isEmptyObject({a:1}),"isEmptyObject on non-empty object literal")}),test("jQuery.proxy",function(){expect(7);var e=function(){equal(this,t,"Make sure that scope is set properly.")},t={foo:"bar",method:e};e.call(t),jQuery.proxy(e,t)(),jQuery.proxy(t,"method")(),equal(jQuery.proxy(null,t),void 0,"Make sure no function was returned.");var n=function(e){equal(e,"pre-applied","Ensure arguments can be pre-applied.")};jQuery.proxy(n,null,"pre-applied")();var r=function(e,t){equal(t,"normal","Ensure arguments can be pre-applied and passed as usual.")};jQuery.proxy(r,null,"pre-applied")("normal");var o={meth:function(e){equal(e,"boom","Ensure old syntax works.")}};jQuery.proxy(o,"meth")("boom")}),test("jQuery.parseHTML",function(){expect(11),equal(jQuery.parseHTML(),null,"Nothing in, null out."),equal(jQuery.parseHTML(null),null,"Nothing in, null out."),equal(jQuery.parseHTML(""),null,"Nothing in, null out."),raises(function(){jQuery.parseHTML("<div>",document.getElementById("form"))},"Passing an element as the context raises an exception (context should be a document)");var e=jQuery.parseHTML(jQuery("body").html());ok(e.length>10,"Parse a large html string"),equal(jQuery.type(e),"array","parseHTML returns an array rather than a nodelist");var t="<script>undefined()</script>";equal(jQuery.parseHTML(t).length,0,"Passing a script is not allowed by default"),raises(function(){jQuery(jQuery.parseHTML(t,!0)).appendTo("#qunit-fixture")},"Passing a script is allowed if allowScripts is true");var n=t+"<div></div>";equal(jQuery.parseHTML(n)[0].nodeName.toLowerCase(),"div","Ignore scripts by default"),raises(function(){jQuery(jQuery.parseHTML(n,!0)).appendTo("#qunit-fixture")},"Passing a script is allowed if allowScripts is true"),equal(jQuery.parseHTML("text")[0].nodeType,3,"Parsing text returns a text node")}),test("jQuery.parseJSON",function(){expect(8),equal(jQuery.parseJSON(),null,"Nothing in, null out."),equal(jQuery.parseJSON(null),null,"Nothing in, null out."),equal(jQuery.parseJSON(""),null,"Nothing in, null out."),deepEqual(jQuery.parseJSON("{}"),{},"Plain object parsing."),deepEqual(jQuery.parseJSON('{"test":1}'),{test:1},"Plain object parsing."),deepEqual(jQuery.parseJSON('\n{"test":1}'),{test:1},"Make sure leading whitespaces are handled.");try{jQuery.parseJSON("{a:1}"),ok(!1,"Test malformed JSON string.")}catch(e){ok(!0,"Test malformed JSON string.")}try{jQuery.parseJSON("{'a':1}"),ok(!1,"Test malformed JSON string.")}catch(e){ok(!0,"Test malformed JSON string.")}}),test("jQuery.parseXML",8,function(){var e,t;try{e=jQuery.parseXML("<p>A <b>well-formed</b> xml string</p>"),t=e.getElementsByTagName("p")[0],ok(!!t,"<p> present in document"),t=t.getElementsByTagName("b")[0],ok(!!t,"<b> present in document"),strictEqual(t.childNodes[0].nodeValue,"well-formed","<b> text is as expected")}catch(n){strictEqual(n,void 0,"unexpected error")}try{e=jQuery.parseXML("<p>Not a <<b>well-formed</b> xml string</p>"),ok(!1,"invalid xml not detected")}catch(n){strictEqual(n.message,"Invalid XML: <p>Not a <<b>well-formed</b> xml string</p>","invalid xml detected")}try{e=jQuery.parseXML(""),strictEqual(e,null,"empty string => null document"),e=jQuery.parseXML(),strictEqual(e,null,"undefined string => null document"),e=jQuery.parseXML(null),strictEqual(e,null,"null string => null document"),e=jQuery.parseXML(!0),strictEqual(e,null,"non-string => null document")}catch(n){ok(!1,"empty input throws exception")}}),jQuery.sub_runs_too_slow_in_IE6&&(test("jQuery.sub() - Static Methods",function(){expect(18);var e=jQuery.sub();e.extend({topLevelMethod:function(){return this.debug},debug:!1,config:{locale:"en_US"},setup:function(e){this.extend(!0,this.config,e)}}),e.fn.extend({subClassMethod:function(){return this}}),ok(e.topLevelMethod()===!1,"Subclass.topLevelMethod thought debug was true"),ok("en_US"==e.config.locale,e.config.locale+" is wrong!"),deepEqual(e.config.test,void 0,"Subclass.config.test is set incorrectly"),equal(jQuery.ajax,e.ajax,"The subclass failed to get all top level methods");
var t=e.sub();ok(t.topLevelMethod()===!1,"SubSubclass.topLevelMethod thought debug was true"),ok("en_US"==t.config.locale,t.config.locale+" is wrong!"),deepEqual(t.config.test,void 0,"SubSubclass.config.test is set incorrectly"),equal(jQuery.ajax,t.ajax,"The subsubclass failed to get all top level methods"),t.fn.extend({subSubClassMethod:function(){return this}}),t.setup({locale:"es_MX",test:"worked"}),t.debug=!0,t.ajax=function(){return!1},ok(t.topLevelMethod(),"SubSubclass.topLevelMethod thought debug was false"),deepEqual(t(document).subClassMethod,e.fn.subClassMethod,"Methods Differ!"),ok("es_MX"==t.config.locale,t.config.locale+" is wrong!"),ok("worked"==t.config.test,"SubSubclass.config.test is set incorrectly"),notEqual(jQuery.ajax,t.ajax,"The subsubclass failed to get all top level methods"),ok(e.topLevelMethod()===!1,"Subclass.topLevelMethod thought debug was true"),ok("en_US"==e.config.locale,e.config.locale+" is wrong!"),deepEqual(e.config.test,void 0,"Subclass.config.test is set incorrectly"),deepEqual(e(document).subSubClassMethod,void 0,"subSubClassMethod set incorrectly"),equal(jQuery.ajax,e.ajax,"The subclass failed to get all top level methods")}),test("jQuery.sub() - .fn Methods",function(){expect(378);var e,t,n,r=jQuery.sub(),o=r.sub(),u=jQuery(document);u.toString=function(){return"jQueryDocument"},r.fn.subclassMethod=function(){},o.fn.subclassSubclassMethod=function(){},e=["body","html, body","<div></div>"],t=[void 0,document,u],jQuery.expandedEach=jQuery.each,jQuery.each(e,function(e,u){jQuery.expandedEach({eq:1,add:document,end:void 0,has:void 0,closest:"div",filter:document,find:"div"},function(e,a){jQuery.each(t,function(t,i){n='("'+u+'", '+i+")."+e+"("+(a||"")+")",deepEqual(function(){return jQuery.fn[e].apply(jQuery(u,i),arguments).subclassMethod}(a),void 0,"jQuery"+n+" doesn't have Subclass methods"),deepEqual(function(){return jQuery.fn[e].apply(jQuery(u,i),arguments).subclassSubclassMethod}(a),void 0,"jQuery"+n+" doesn't have SubclassSubclass methods"),deepEqual(r(u,i)[e](a).subclassMethod,r.fn.subclassMethod,"Subclass"+n+" has Subclass methods"),deepEqual(r(u,i)[e](a).subclassSubclassMethod,void 0,"Subclass"+n+" doesn't have SubclassSubclass methods"),deepEqual(o(u,i)[e](a).subclassMethod,r.fn.subclassMethod,"SubclassSubclass"+n+" has Subclass methods"),deepEqual(o(u,i)[e](a).subclassSubclassMethod,o.fn.subclassSubclassMethod,"SubclassSubclass"+n+" has SubclassSubclass methods")})})})})),test("jQuery.camelCase()",function(){var e={"foo-bar":"fooBar","foo-bar-baz":"fooBarBaz","girl-u-want":"girlUWant","the-4th-dimension":"the4thDimension","-o-tannenbaum":"OTannenbaum","-moz-illa":"MozIlla","-ms-take":"msTake"};expect(7),jQuery.each(e,function(e,t){equal(jQuery.camelCase(e),t,"Converts: "+e+" => "+t)})});