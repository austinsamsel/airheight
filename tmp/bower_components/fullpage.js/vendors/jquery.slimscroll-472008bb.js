/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.2 (modified for fullpage.js)
 *
 */
!function(e){jQuery.fn.extend({slimScroll:function(n){var i={width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},r=e.extend(i,n);return this.each(function(){function i(t){if(d){var t=t||window.event,n=0;t.wheelDelta&&(n=-t.wheelDelta/120),t.detail&&(n=t.detail/3);var i=t.target||t.srcTarget||t.srcElement;e(i).closest("."+r.wrapperClass).is(_.parent())&&s(n,!0),t.preventDefault&&!x&&t.preventDefault(),x||(t.returnValue=!1)}}function s(e,t,n){x=!1;var i=e,s=_.outerHeight()-E.outerHeight();if(t&&(i=parseInt(E.css("top"))+e*parseInt(r.wheelStep)/100*E.outerHeight(),i=Math.min(Math.max(i,0),s),i=e>0?Math.ceil(i):Math.floor(i),E.css({top:i+"px"})),y=parseInt(E.css("top"))/(_.outerHeight()-E.outerHeight()),i=y*(_[0].scrollHeight-_.outerHeight()),n){i=e;var o=i/_[0].scrollHeight*_.outerHeight();o=Math.min(Math.max(o,0),s),E.css({top:o+"px"})}_.scrollTop(i),_.trigger("slimscrolling",~~i),u(),c()}function o(){window.addEventListener?(this.addEventListener("DOMMouseScroll",i,!1),this.addEventListener("mousewheel",i,!1)):document.attachEvent("onmousewheel",i)}function a(){window.removeEventListener?(this.removeEventListener("DOMMouseScroll",i),this.removeEventListener("mousewheel",i)):document.detachEvent("onmousewheel",i)}function l(){m=Math.max(_.outerHeight()/_[0].scrollHeight*_.outerHeight(),b),E.css({height:m+"px"});var e=m==_.outerHeight()?"none":"block";E.css({display:e})}function u(){if(l(),clearTimeout(p),y==~~y){if(x=r.allowPageScroll,v!=y){var e=0==~~y?"top":"bottom";_.trigger("slimscroll",e)}}else x=!1;return v=y,m>=_.outerHeight()?void(x=!0):(E.stop(!0,!0).fadeIn("fast"),void(r.railVisible&&T.stop(!0,!0).fadeIn("fast")))}function c(){r.alwaysVisible||(p=setTimeout(function(){r.disableFadeOut&&d||h||f||(E.fadeOut("slow"),T.fadeOut("slow"))},1e3))}var d,h,f,p,g,m,y,v,w="<div></div>",b=30,x=!1,_=e(this);if(_.parent().hasClass(r.wrapperClass)){var C=_.scrollTop();if(E=_.parent().find("."+r.barClass),T=_.parent().find("."+r.railClass),l(),e.isPlainObject(n)){if("height"in n&&"auto"==n.height){_.parent().css("height","auto"),_.css("height","auto");var $=_.parent().parent().height();_.parent().css("height",$),_.css("height",$)}if("scrollTo"in n)C=parseInt(r.scrollTo);else if("scrollBy"in n)C+=parseInt(r.scrollBy);else if("destroy"in n)return a(),E.remove(),T.remove(),void _.unwrap();s(C,!1,!0)}}else{r.height="auto"==n.height?_.parent().height():n.height;var k=e(w).addClass(r.wrapperClass).css({position:"relative",overflow:"hidden",width:r.width,height:r.height});_.css({overflow:"hidden",width:r.width,height:r.height});var T=e(w).addClass(r.railClass).css({width:r.size,height:"100%",position:"absolute",top:0,display:r.alwaysVisible&&r.railVisible?"block":"none","border-radius":r.railBorderRadius,background:r.railColor,opacity:r.railOpacity,zIndex:90}),E=e(w).addClass(r.barClass).css({background:r.color,width:r.size,position:"absolute",top:0,opacity:r.opacity,display:r.alwaysVisible?"block":"none","border-radius":r.borderRadius,BorderRadius:r.borderRadius,MozBorderRadius:r.borderRadius,WebkitBorderRadius:r.borderRadius,zIndex:99}),F="right"==r.position?{right:r.distance}:{left:r.distance};T.css(F),E.css(F),_.wrap(k),_.parent().append(E),_.parent().append(T),r.railDraggable&&E.bind("mousedown",function(n){var i=e(document);return f=!0,t=parseFloat(E.css("top")),pageY=n.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,E.css("top",currTop),s(0,E.position().top,!1)}),i.bind("mouseup.slimscroll",function(){f=!1,c(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),T.hover(function(){u()},function(){c()}),E.hover(function(){h=!0},function(){h=!1}),"transparent"==_.css("background-color")||"rgba(0, 0, 0, 0)"==_.css("background-color")?(d=!0,u(),c()):(d=!1,c()),_.hover(function(){d=!0,u(),c()},function(){d=!1,c()}),_.bind("touchstart",function(e){e.originalEvent.touches.length&&(g=e.originalEvent.touches[0].pageY)}),_.bind("touchmove",function(e){if(x||e.originalEvent.preventDefault(),e.originalEvent.touches.length){var t=(g-e.originalEvent.touches[0].pageY)/r.touchScrollStep;s(t,!0),g=e.originalEvent.touches[0].pageY}}),l(),"bottom"===r.start?(E.css({top:_.outerHeight()-E.outerHeight()}),s(0,!0)):"top"!==r.start&&(s(e(r.start).position().top,null,!0),r.alwaysVisible||E.hide()),o()}}),this}}),jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})}(jQuery);